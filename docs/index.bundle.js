(self.webpackChunkhexagon_board=self.webpackChunkhexagon_board||[]).push([[826],{426:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(81),a=n.n(r),o=n(645),i=n.n(o)()(a());i.push([t.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  overflow: hidden;\n}\n\n#app {\n  width: 100%;\n  min-height: 100vh;\n  position: relative;\n}\n\n#app canvas {\n  width: 100%;\n  height: 100%;\n  background-color: black;\n}\n\n#btn-start {\n  position: absolute;\n  top: 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 10px 20px;\n  font-size: 36px;\n  line-height: 44px;\n}",""]);const s=i},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,a,o){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);r&&i[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),e.push(u))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},i=[],s=0;s<t.length;s++){var c=t[s],l=r.base?c[0]+r.base:c[0],u=o[l]||0,f="".concat(l," ").concat(u);o[l]=u+1;var h=n(f),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(d);else{var p=a(d,r);r.byIndex=s,e.splice(s,0,{identifier:f,updater:p,references:1})}i.push(f)}return i}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var o=r(t=t||[],a=a||{});return function(t){t=t||[];for(var i=0;i<o.length;i++){var s=n(o[i]);e[s].references--}for(var c=r(t,a),l=0;l<o.length;l++){var u=n(o[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}o=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},601:()=>{HEX_SIZE=50},699:(t,e,n)=>{"use strict";var r,a,o;n.d(e,{Ab:()=>o,Rv:()=>a,ZP:()=>i}),function(t){t.STR="strength",t.AGI="agility",t.VIT="vitality",t.INT="intellegent",t.RAN="attack_range"}(a||(a={})),function(t){t.HP="health_point",t.MP="mana_point",t.PD="physical_damgage",t.MD="magical_damage",t.AS="attack_speed",t.MS="movement_speed"}(o||(o={}));const i={COMPLEX_STAT_FORMULA:((r={})[o.HP]="{".concat(a.VIT,"} * 10"),r[o.MP]="{".concat(a.INT,"} * 10"),r[o.PD]="{".concat(a.STR,"} * 3"),r[o.MD]="{".concat(a.INT,"} * 3"),r[o.AS]="{".concat(a.AGI,"} * 1.5"),r[o.MS]="{".concat(a.AGI,"} * 1"),r)}},324:(t,e,n)=>{"use strict";var r=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}],a=[2,3,4],o=function(t,e){return{q:t.q+e.q,r:t.r+e.r}},i=function(t,e){return{q:t.q-e.q,r:t.r-e.r}},s=function(t,e){return(null==t?void 0:t.r)===(null==e?void 0:e.r)&&(null==t?void 0:t.q)===(null==e?void 0:e.q)},c=function(t,e){return o(t,function(t){return r[t]}(e))},l=function(t){for(var e=[],n=0;n<6;n++)e.push(c(t,n));return e},u=function(){return HEX_SIZE*cam.zoom},f=function(t){return{q:t.q,r:t.r}},h=function(t){var e=t.q,n=t.r;return{q:e,r:n,s:-e-n}},d=function(t){var e=Math.round(t.q),n=Math.round(t.r),r=Math.round(t.s),a=Math.abs(e-t.q),o=Math.abs(n-t.r),i=Math.abs(r-t.s);return a>o&&a>i?e=-n-r:o>i?n=-e-r:r=-e-n,{q:e,r:n,s:r}},p=function(t){return f(d(h(t)))},v=function(t){return{x:t.r,y:t.q+Math.floor(t.r/2)}},m={axialAdd:o,axialSubtract:i,axialEqual:s,axialIsLeft:function(t,e){var n=i(t,e),o=r.findIndex((function(t){return s(t,n)}));return a.includes(o)},axialDistance:function(t,e){var n=i(t,e);return(Math.abs(n.q)+Math.abs(n.q+n.r)+Math.abs(n.r))/2},axialNeighbor:c,getAxialNeighbors:l,cubeToAxial:f,axialToCube:h,cubeRound:d,axialRound:p,pixelToHex:function(t){var e=(Math.sqrt(3)/3*t.x-1/3*t.y)/u(),n=2/3*t.y/u();return p({q:e,r:n})},hexToPixel:function(t){return{x:HEX_SIZE*(Math.sqrt(3)*t.q+Math.sqrt(3)/2*t.r),y:HEX_SIZE*(1.5*t.r)}},axialToStore:v,lerp:function(t,e,n){return t+(e-t)*n},isNeighbor:function(t,e){return l(e).some((function(e){return s(t,e)}))},isInRange:function(t,e,n){var r=i(t,e);return Math.abs(r.r)<=n&&Math.abs(r.q)<=n},isExistOnBoard:function(t,e){var n=v(e),r=n.x,a=n.y;return!(r<0||r>=t.length||a<0||a>=t[r].length)}};const b=m;var y={init:function(t,e){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)t[n][r].f=0,t[n][r].g=0,t[n][r].h=0,t[n][r].debug=0,t[n][r].parent=null,t[n][r].neighbors=[];var a=b.axialToStore(e);for(n=0;n<t.length;n++)for(r=0;r<t[n].length;r++)for(var o=0,i=b.getAxialNeighbors(t[n][r]);o<i.length;o++){var s=i[o],c=b.axialToStore(s),l=c.x,u=c.y;l<0||l>=t.length||u>=t[n].length||u<0||(!t[l][u].block||l===a.x&&u===a.y)&&t[n][r].neighbors.push(t[l][u])}return t},getBoardHex:function(t,e){var n=b.axialToStore(t),r=n.x,a=n.y;return e[r][a]},search:function(t,e,n){var r=y.init(t,n),a=y.getBoardHex(e,r),o=y.getBoardHex(n,r),i=[],s=[],c=[];for(i.push(a);i.length;){for(var l=0,u=0;u<i.length;u++)i[u].f<i[l].f&&(l=u);var f=i[l];if(b.axialEqual(f,o)){var h=f;for(c.push(h);h.parent;)c.push(h.parent),h=h.parent;return c.reverse()}i.splice(l,1),s.push(f);var d=f.neighbors;for(u=0;u<d.length;u++){var p=d[u];if(!s.includes(p)){var v=f.g+1;if(i.includes(p)){if(v>=p.g)continue}else i.push(p);p.g=v,p.h=b.axialDistance(p,o),p.f=p.g+p.h,p.parent=f}}}return[]}};const x=y;var g;!function(t){t.GREEN="green",t.RED="red",t.BLUE="blue"}(g||(g={}));const w=g;var _=function(){return _=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},_.apply(this,arguments)},T=function(t){return"object"!=typeof t||Object.keys(t).forEach((function(e){(void 0===t[e]||Number.isNaN(t[e]))&&delete t[e]})),t};const E=_(_({},{getRandomColor:function(){var t=Object.values(w);return t[Math.round(Math.random()*t.length)]||"white"}}),{objFilterNaN:T});var k=function(){return k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},k.apply(this,arguments)},S={focus:function(t){var e=canvas.width,r=canvas.height;n.g.cam={x:t.x-e/2,y:t.y-r/2,zoom:1,width:e,height:r}},move:function(t){n.g.cam=k(k({},n.g.cam),{x:n.g.cam.x+t.x,y:n.g.cam.y+t.y})},zoom:function(t){t.offsetX,t.offsetY;var e=t.deltaY,r=cam.zoom*(1+.05*Math.sign(e));n.g.cam=k(k({},n.g.cam),{zoom:r})},inCam:function(t){if("number"==typeof t)return t*cam.zoom;var e=t,n=e.x,r=e.y,a=e.width,o=e.height,i=e.size,s={x:(n-cam.x)*cam.zoom,y:(r-cam.y)*cam.zoom,width:a*cam.zoom,height:o*cam.zoom,size:i*cam.zoom};return T(s)},mouseCam:function(t){return k(k({},t),{x:t.offsetX+cam.x*cam.zoom,y:t.offsetY+cam.y*cam.zoom})}};const A=S;document.getElementById("sprite");var M=2*Math.PI/6,P={clearScreen:function(){ctx.clearRect(0,0,canvas.width,canvas.height)},drawHex:function(t,e){void 0===e&&(e="white");var n=A.inCam(t),r=n.x,a=n.y,o=n.size;ctx.beginPath();for(var i=0;i<6;i++)ctx.lineTo(r+o*Math.sin(M*i),a+o*Math.cos(M*i));ctx.closePath(),ctx.fillStyle=e,ctx.fill()},strokeHex:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n="white");var r=A.inCam(t),a=r.x,o=r.y,i=r.size,s=A.inCam(e);i-=e/2,ctx.beginPath();for(var c=0;c<6;c++)ctx.lineTo(a+i*Math.sin(M*c),o+i*Math.cos(M*c));ctx.closePath(),ctx.save(),ctx.strokeStyle=n,ctx.lineWidth=s,ctx.stroke(),ctx.restore()},drawRect:function(t){var e=A.inCam(t),n=e.x,r=e.y,a=e.width,o=e.height;ctx.fillStyle="white",ctx.fillRect(n,r,a,o)},drawText:function(t,e,n){void 0===n&&(n="black");var r=A.inCam(e),a=r.x,o=r.y;ctx.font="20px Arial",ctx.fillStyle=n,ctx.fillText(t,a,o)},drawImage:function(t,e,n,r,a){void 0===n&&(n=0),void 0===a&&(a=1);var o=A.inCam(e),i=o.x,s=o.y,c=o.width,l=o.height,u=A.inCam(1);ctx.save(),-1===a?(ctx.translate(i+c*u/2,s-(l+80)*u/2),ctx.scale(-1,1)):ctx.translate(i-c*u/2,s-(l+80)*u/2),ctx.drawImage(t,r.x+n*c,r.y,c,l,0,0,c*u,l*u),ctx.restore()}};const C=P;var q,I=n(699);const O={DEFAULT_STAT:((q={})[I.Rv.STR]=1,q[I.Rv.AGI]=1,q[I.Rv.VIT]=1,q[I.Rv.INT]=1,q[I.Rv.RAN]=1,q)},R={name:"skeletrooper",stats:{strength:1,agility:1,vitality:1,intellegent:1,attack_range:1},sprites:{idle:{src:"sprites/specter.png",name:"specter.png",offsetX:0,offsetY:-1,frames:6,frameW:104,frameH:87,transform:{x:13,y:10},duration:400},walk:{src:"sprites/specter.png",name:"specter.png",offsetX:0,offsetY:87,frames:6,frameW:108,frameH:85,transform:{x:13,y:10},duration:500},attack:{src:"sprites/specter.png",name:"specter.png",offsetX:0,offsetY:172,frames:12,frameW:428,frameH:261,transform:{x:-3,y:21},duration:500},die:{src:"sprites/specter.png",name:"specter.png",offsetX:0,offsetY:433,frames:11,frameW:191,frameH:125,transform:{x:0,y:0},duration:320}}};var H=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},L={startCoroutine:function(t){return new Promise((function(e,n){var r={generator:t(),onDone:function(){console.log("callback done"),e()}};animCallback.push(r)}))},sleep:function(t){return e=void 0,r=void 0,o=function(){return H(this,(function(e){switch(e.label){case 0:return[4,L.startCoroutine((function(){var e;return H(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:return e>=t?[3,3]:(e+=n.g.deltaTime,[4,null]);case 2:return r.sent(),[3,1];case 3:return[2]}}))}))];case 1:return e.sent(),[2]}}))},new((a=void 0)||(a=Promise))((function(t,n){function i(t){try{c(o.next(t))}catch(t){n(t)}}function s(t){try{c(o.throw(t))}catch(t){n(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(i,s)}c((o=o.apply(e,r||[])).next())}));var e,r,a,o}};const D=L;var N=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},z=function(){function t(t){var e=t.src,n=t.name,r=void 0===n?"":n,a=t.offsetX,o=void 0===a?0:a,i=t.offsetY,s=void 0===i?0:i,c=t.frames,l=void 0===c?0:c,u=t.frameW,f=void 0===u?0:u,h=t.frameH,d=void 0===h?0:h,p=t.transform,v=void 0===p?{x:0,y:0}:p,m=t.duration,b=void 0===m?0:m;console.log(e),this.src=e,this.name=r,this.offsetX=o,this.offsetY=s,this.frames=l,this.frameW=f,this.frameH=d,this.transform=v,this.duration=b,this.frame=0}return t.prototype.startAnimate=function(t){return e=this,r=void 0,o=function(){var e;return N(this,(function(r){switch(r.label){case 0:return e=this,[4,D.startCoroutine((function(){var r;return N(this,(function(a){switch(a.label){case 0:r=0,a.label=1;case 1:return r>=t?(e.frame=0,[3,3]):(e.frame=Math.floor(r%e.duration/(e.duration/e.frames)),e.frame>=e.frames&&(e.frame=0),r+=n.g.deltaTime,[4,null]);case 2:return a.sent(),[3,1];case 3:return[2]}}))}))];case 1:return r.sent(),[2]}}))},new((a=void 0)||(a=Promise))((function(t,n){function i(t){try{c(o.next(t))}catch(t){n(t)}}function s(t){try{c(o.throw(t))}catch(t){n(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(i,s)}c((o=o.apply(e,r||[])).next())}));var e,r,a,o},t.prototype.render=function(t,e){var n=t.x,r=t.y,a=n+this.transform.x*e,o=r+this.transform.y;C.drawImage(this.src,{x:a,y:o,width:this.frameW,height:this.frameH},this.frame,{x:this.offsetX,y:this.offsetY},e)},t}();const F=z;var j=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((r=r.apply(t,e||[])).next())}))},K=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},V=function(){function t(){}var e;return e=t,t.loaded={},t.load=function(t,n){return j(void 0,void 0,void 0,(function(){var r,a;return K(e,(function(e){switch(e.label){case 0:return this.loaded[t]&&console.log("".concat(t," had loaded")),r="./assets/".concat(n),this.loaded[t]=null,console.log("".concat(t," loading")),[4,(o=r,j(void 0,void 0,void 0,(function(){return K(this,(function(t){return[2,new Promise((function(t,e){var n=new Image;n.onload=function(){t(n)},n.src=o}))]}))})))];case 1:return a=e.sent(),this.loaded[t]=a,[2,a]}var o}))}))},t.get=function(t){return e.loaded[t]},t}();const W=V;var X,B=n(322),Z=n(634),G=function(){return G=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},G.apply(this,arguments)},U=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((r=r.apply(t,e||[])).next())}))},Y=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};document.getElementById("sprite"),function(t){t.IDLE="idle",t.WALK="walk",t.ATTACK="attack"}(X||(X={}));var J=function(){function t(t){var e=t.hex,n=void 0===e?null:e,r=t.dir,a=void 0===r?1:r;t.base_stats,this.frame=0,this.maxFrame=0,this.status=X.IDLE,this.dir=1,this.sprites={idle:null,walk:null,attack:null},this.hex=n,this.dir=a,this.battle=n.battle,this.stats=this.initEntityBaseStat(Q()),this.calcEntityComplexStat();var o=R;this.loadAssets(o.sprites)}return t.prototype.initEntityBaseStat=function(t){return Object.entries(t).reduce((function(t,e){var n=e[0],r=e[1];return t[n]=new Z.Z({name:n,value:r}),t}),{})},t.prototype.calcEntityComplexStat=function(){var t=this;Object.entries(I.Ab).forEach((function(e){e[0];var n=e[1];t.stats[n]=new B.Z({name:n,value:t.stats})}))},t.prototype.loadAssets=function(t){return U(this,void 0,void 0,(function(){var e=this;return Y(this,(function(n){return Object.entries(t).forEach((function(n){var r=n[0],a=n[1];return U(e,void 0,void 0,(function(){var e,n;return Y(this,(function(o){switch(o.label){case 0:return[4,W.load(a.name,a.src)];case 1:return e=o.sent(),n=new F(G(G({},t[r]),{src:e})),this.sprites[r]=n,r===X.IDLE&&(this.animate=n),[2]}}))}))})),[2]}))}))},t.prototype.startAnimate=function(t,e){switch(void 0===e&&(e=0),this.status=t,t){case X.IDLE:this.animate=this.sprites.idle,this.animate.startAnimate();break;case X.WALK:this.animate=this.sprites.walk,this.animate.startAnimate(e);break;case X.ATTACK:this.animate=this.sprites.attack,this.animate.startAnimate(e);break;default:this.animate=this.sprites.idle,this.animate.startAnimate()}},t.prototype.action=function(){return U(this,void 0,void 0,(function(){var t,e,n,r=this;return Y(this,(function(a){switch(a.label){case 0:return t=this.hex.team,e=t.enemiesTeam.map((function(t){return t.allies})).flat(),n=e.filter((function(t){return b.isInRange(r.hex,t,r.getFinalValue(I.Rv.RAN))})),console.log("target in range[".concat(this.getFinalValue(I.Rv.RAN),"]: "),n),n.length?[3,2]:[4,this.moveToNearestTarget(e)];case 1:a.sent(),a.label=2;case 2:return(n=e.filter((function(t){return b.isInRange(r.hex,t,r.getFinalValue(I.Rv.RAN))}))).length?[4,this.attack()]:[3,4];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},t.prototype.moveToNearestTarget=function(t){return U(this,void 0,void 0,(function(){var e,n=this;return Y(this,(function(r){switch(r.label){case 0:return(e=t.reduce((function(t,e){var r=x.search(n.battle.board,n.hex,e);return r.splice(0,1),0===t.length?r.length?r:t:r.length&&r.length<t.length?r:t}),[])).length>1?(e.splice(e.length-1,1),console.log("move ".concat(this.getFinalValue(I.Ab.MS))),[4,this.hex.move(e.splice(0,this.getFinalValue(I.Ab.MS)))]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.attack=function(){return U(this,void 0,void 0,(function(){return Y(this,(function(t){switch(t.label){case 0:return this.startAnimate(X.ATTACK,this.sprites.attack.duration),[4,D.sleep(this.sprites.attack.duration)];case 1:return t.sent(),this.startAnimate(X.IDLE),[2]}}))}))},t.prototype.getFinalValue=function(t){return this.stats[t].finalValue},t.prototype.render=function(){var t,e=b.hexToPixel(this.hex),n=e.x,r=e.y;null===(t=this.animate)||void 0===t||t.render({x:n,y:r},this.dir)},t}(),Q=function(){var t=O.DEFAULT_STAT,e=Math.round(2.5*(Object.keys(I.Rv).length-1)),n=0;for(var r in t){var a=Math.round(2*Math.random()+1);n+=a,t[r]=a}return t[I.Rv.AGI]=Math.max(1,e-(n-t[I.Rv.AGI])),t[I.Rv.RAN]=1,t};const $=J;var tt=function(t,e,n){void 0===n&&(n=!1);var r=b.axialToStore(e),a=r.x,o=r.y;(null==t?void 0:t.board[a][o])&&(t.board[a][o].block=n)},et=function(){return et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},et.apply(this,arguments)},nt=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},rt=function(){function t(t){var e=t.battle,n=t.team,r=t.q,a=t.r,o=t.color,i=t.owner,s=void 0===i?null:i,c=t.block,l=void 0!==c&&c;this.color="white",this.battle=e,this.team=n,this.q=r,this.r=a,this.owner=s,this.block=l,this.color=(null==n?void 0:n.color)||o||"white"}return t.prototype.updatePos=function(t){this.r=t.r,this.q=t.q},t.prototype.move=function(t){return e=this,r=void 0,o=function(){function e(){var e,a,o;return nt(this,(function(i){switch(i.label){case 0:if(!t.length)return[2];e=0,a=et({},this),o=t.splice(0,1)[0],tt(this.battle,a,!1),tt(this.battle,o,!0),this.owner.dir=b.axialIsLeft(o,a)?-1:1,i.label=1;case 1:if(this.updatePos({r:b.lerp(a.r,o.r,e/r),q:b.lerp(a.q,o.q,e/r)}),e>=r){if(e=0,a=o,!t.length)return this.updatePos(o),[3,3];o=t.splice(0,1)[0],this.owner.dir=b.axialIsLeft(o,a)?-1:1,tt(this.battle,a,!1),tt(this.battle,o,!0)}return e+=n.g.deltaTime,[4,null];case 2:return i.sent(),[3,1];case 3:return[2]}}))}var r;return nt(this,(function(n){switch(n.label){case 0:return r=this.owner.sprites.walk.duration,this.owner.startAnimate(X.WALK,r*t.length-1),[4,D.startCoroutine(e.bind(this))];case 1:return n.sent(),this.owner.startAnimate(X.IDLE),[2]}}))},new((a=void 0)||(a=Promise))((function(t,n){function i(t){try{c(o.next(t))}catch(t){n(t)}}function s(t){try{c(o.throw(t))}catch(t){n(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(i,s)}c((o=o.apply(e,r||[])).next())}));var e,r,a,o},t.prototype.render=function(){var t=b.hexToPixel(this),e=t.x,n=t.y;C.strokeHex({x:e,y:n,size:HEX_SIZE},10,this.color)},t}();const at=rt;var ot=function(){return ot=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},ot.apply(this,arguments)},it=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function i(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((r=r.apply(t,e||[])).next())}))},st=function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ct=[{side:"team1",allies:[{pos:{x:0,y:3},dir:1}],color:"green",enemyTeams:["team2"]},{side:"team2",allies:[{pos:{x:7,y:1},dir:-1},{pos:{x:7,y:3},dir:-1},{pos:{x:7,y:5},dir:-1},{pos:{x:7,y:4},dir:-1},{pos:{x:7,y:6},dir:-1}],color:"red",enemyTeams:["team1"]}],lt=function(){function t(t){void 0===t&&(t=[]);var e=this;this.path=[],this.count=0,this.canAction=!0,this.teams={},this.board=t;for(var n=0;n<8;n++){t.length<n+1&&this.board.push([]);for(var r=0;r<10;r++)this.board[n].push(new at({battle:this,r:n,q:r-Math.floor(n/2)}))}ct.forEach((function(t){var n=t.side,r=t.allies,a=t.enemyTeams,o=t.color;n in e.teams||(e.teams[n]={side:n,allies:[],enemiesTeam:[],color:o||E.getRandomColor()}),e.teams[n].color=o||E.getRandomColor(),a.forEach((function(t){t in e.teams||(e.teams[t]={side:t,allies:[],enemiesTeam:[],color:E.getRandomColor()}),e.teams[n].enemiesTeam.push(e.teams[t])})),r.forEach((function(t){e.addHexEntity(t.pos,e.teams[n],t.dir)}))}));var a=document.getElementById("btn-start");null==a||a.addEventListener("click",(function(){e.startBattle()})),canvas.addEventListener("click",this.mouseClickHandler.bind(this))}return t.prototype.addHexEntity=function(t,e,n){void 0===n&&(n=1);var r=new at(ot(ot({battle:this},this.board[t.y][t.x]),{team:e}));r.owner=new $({hex:r,dir:n}),e.allies.push(r),this.board[t.y][t.x].block=!0},t.prototype.startBattle=function(){return it(this,void 0,void 0,(function(){var t,e;return st(this,(function(n){switch(n.label){case 0:t=this.getAllTeamMembers(),e=0,n.label=1;case 1:return console.log("action start",e%t.length),[4,t[e%t.length].owner.action()];case 2:return n.sent(),console.log("action done",e%t.length),e++,[3,1];case 3:return[2]}}))}))},t.prototype.mouseClickHandler=function(t){var e;return it(this,void 0,void 0,(function(){var n,r,a,o,i,s,c,l;return st(this,(function(u){switch(u.label){case 0:return this.canAction?(n=t.shiftKey,r=b.pixelToHex(A.mouseCam(t)),a=r.r,o=r.q,i=b.axialToStore({r:a,q:o}),s=i.x,c=i.y,a>=this.board.length||a<0?[2]:n?(this.board[s][c].block=!this.board[s][c].block,[2]):this.select?b.axialEqual(this.select,{r:a,q:o})?(this.select=null,[2]):this.board[s][c].block?[3,2]:(this.canAction=!1,(l=b.axialToStore(this.select)).x,l.y,[4,this.select.move(this.path)]):[3,3]):[2];case 1:u.sent(),this.select=null,this.canAction=!0,u.label=2;case 2:return[3,4];case 3:null===(e=this.getAllTeamMembers().find((function(t){return b.axialEqual(t,{r:a,q:o})})))||void 0===e||e.owner.action(),u.label=4;case 4:return[2]}}))}))},t.prototype.getAllTeamMembers=function(){return Object.values(this.teams).map((function(t){return t.allies})).flat()},t.prototype.mouseMoveHandler=function(t){var e,n,r;if(this.select&&this.canAction){var a=b.pixelToHex(A.mouseCam(t)),o=b.axialToStore(a),i=o.x,s=o.y;if(!(i>=this.board.length||i<0||s<0||s>=this.board[i].length||(null===(e=this.board[i][s])||void 0===e?void 0:e.block))){var c=new at(ot({battle:this},this.board[i][s]));c.r===(null===(n=this.hover)||void 0===n?void 0:n.r)&&c.q===(null===(r=this.hover)||void 0===r?void 0:r.q)||(this.hover=c,this.path=x.search(this.board,this.select,this.hover),this.path.splice(0,1))}}},t.prototype.render=function(){var t,e,n,r=this.getAllTeamMembers();null===(t=this.board)||void 0===t||t.map((function(t){null==t||t.map((function(t){var e=b.hexToPixel(t),n=e.x,r=e.y,a="white";t.block&&(a="gray"),C.drawHex({x:n,y:r,size:HEX_SIZE},a)}))})),r.sort((function(t,e){return t.r>e.r?1:t.r<e.r?-1:0})).forEach((function(t){var e;t.render(),null===(e=null==t?void 0:t.owner)||void 0===e||e.render()})),(null===(e=this.path)||void 0===e?void 0:e.length)&&(null===(n=this.path)||void 0===n||n.forEach((function(t){var e=b.hexToPixel(t),n=e.x,r=e.y;C.drawHex({x:n,y:r,size:.3*HEX_SIZE},"orange")})))},t}();const ut=lt;var ft={resize:function(){var t=canvas.parentElement;if(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;canvas.width=n,canvas.height=r}},getCenter:function(){return{x:canvas.width/2,y:canvas.height/2}}};const ht=ft;var dt,pt,vt;!function(t){t.TOP="top",t.LEFT="left",t.RIGHT="right",t.DOWN="down"}(vt||(vt={}));var mt=((dt={})[vt.TOP]={isPress:!1},dt[vt.LEFT]={isPress:!1},dt[vt.RIGHT]={isPress:!1},dt[vt.DOWN]={isPress:!1},dt),bt=((pt={})[vt.TOP]=["KeyW"],pt[vt.LEFT]=["KeyA"],pt[vt.RIGHT]=["KeyD"],pt[vt.DOWN]=["KeyS"],pt),yt=function(){function t(){}return t.isPress=function(t){return this.keyboardStatus[t].isPress},t.bindEvent=function(){window.addEventListener("keydown",this.bindKey),window.addEventListener("keyup",this.bindKey)},t.unbindEvent=function(){window.removeEventListener("keydown",this.bindKey),window.removeEventListener("keyup",this.bindKey)},t.bindKey=function(e){var n=e.type,r=e.code,a=Object.entries(t.keyboardMapping).find((function(t){return t[0],t[1].includes(r)}));a&&(t.keyboardStatus[a[0]].isPress="keydown"===n)},t.keyboardMapping=bt,t.keyboardStatus=mt,t}();const xt=yt;n(601);var gt=n(379),wt=n.n(gt),_t=n(795),Tt=n.n(_t),Et=n(569),kt=n.n(Et),St=n(565),At=n.n(St),Mt=n(216),Pt=n.n(Mt),Ct=n(589),qt=n.n(Ct),It=n(426),Ot={};Ot.styleTagTransform=qt(),Ot.setAttributes=At(),Ot.insert=kt().bind(null,"head"),Ot.domAPI=Tt(),Ot.insertStyleElement=Pt(),wt()(It.Z,Ot),It.Z&&It.Z.locals&&It.Z.locals;var Rt=document.createElement("canvas");n.g.canvas=Rt,n.g.ctx=Rt.getContext("2d"),n.g.cameraSpeed=1e3,n.g.animCallback=[];var Ht=document.createElement("div");Ht.id="app",Ht.appendChild(Rt);var Lt=document.createElement("button");Lt.innerText="START",Lt.id="btn-start",Ht.appendChild(Lt),document.body.appendChild(Ht);var Dt=new ut([]),Nt=function(){var t=(new Date).getTime();n.g.deltaTime=t-n.g.prev,n.g.prev=t,animCallback.forEach((function(t,e){var n=t.generator.next().done;n&&(console.log("done",n),t.onDone(),console.log(animCallback),animCallback.splice(e,1),console.log(animCallback))})),function(){var t=+xt.isPress(vt.RIGHT)-+xt.isPress(vt.LEFT),e=+xt.isPress(vt.DOWN)-+xt.isPress(vt.TOP);if(t||e){var r=cameraSpeed*n.g.deltaTime/1e3/n.g.cam.zoom;A.move({x:t*r,y:e*r})}}(),C.clearScreen(),ctx.font="30px Arial",ctx.strokeStyle="white",ctx.strokeText("FPS: ".concat(Math.floor(n.g.deltaTime/1e3*3600)),10,40),Dt.render(),window.requestAnimationFrame(Nt)};n.g.prev=(new Date).getTime(),ht.resize(),A.focus({x:300,y:200}),xt.bindEvent(),window.addEventListener("resize",ht.resize),window.addEventListener("wheel",(function(t){A.zoom(t)})),window.requestAnimationFrame(Nt)},322:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _constants_StatConstants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(699),_Stat__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(634),__extends=(extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},extendStatics(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),extendStatics,ComplexStat=function(_super){function ComplexStat(t){var e=t.name,n=t.value,r=_super.call(this,{name:e,value:0})||this;return r.calcHighStat(n),r.calcFinalValue(),r}return __extends(ComplexStat,_super),ComplexStat.prototype.calcHighStat=function(stats){var formula=_constants_StatConstants__WEBPACK_IMPORTED_MODULE_0__.ZP.COMPLEX_STAT_FORMULA[this.name],result=formula.replace(/{(\w+)}/g,(function(t,e){return"".concat(stats[e].finalValue)}));this.baseValue=Math.round(eval(result)||0)},ComplexStat}(_Stat__WEBPACK_IMPORTED_MODULE_1__.Z);const __WEBPACK_DEFAULT_EXPORT__=ComplexStat},634:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(){function t(t){var e=t.name,n=t.value;this.addModifier=[],this.ampModifier=[],this.name=e,this.baseValue=n,this.calcFinalValue()}return t.prototype.setValue=function(t){return this.baseValue=t,this.calcFinalValue()},t.prototype.calcFinalValue=function(){var t,e,n=null===(t=this.addModifier)||void 0===t?void 0:t.reduce((function(t,e){return t+e.value}),0),r=null===(e=this.ampModifier)||void 0===e?void 0:e.reduce((function(t,e){return t+e.value}),0);return this.finalValue=this.baseValue*(1+r/100)+n,this.finalValue},t}()}},t=>{t(t.s=324)}]);